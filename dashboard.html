<!DOCTYPE html>
<html>
<head>
  <title>Dashboard Kesehatan</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<h2>Dashboard Data Kesehatan</h2>

<div id="ringkasan"></div>

<canvas id="grafik" height="90"></canvas>

<script>
const API = "PASTE_WEB_APP_URL";

fetch(API)
  .then(r => r.json())
  .then(data => {
    const d = data[data.length - 1]; // data terakhir

    const ibuHamilTotal = +d[1] + +d[2];
    const balitaTotal = +d[3] + +d[4] + +d[5];

    ringkasan.innerHTML = `
      <h3>Ibu Hamil</h3>
      Normal: ${d[1]} | Risti: ${d[2]} | <b>Total: ${ibuHamilTotal}</b>

      <h3>Balita</h3>
      Normal: ${d[3]} | Stunting: ${d[4]} | Gizi Buruk: ${d[5]}
      | <b>Total: ${balitaTotal}</b>

      <h3>Lainnya</h3>
      Disabilitas: ${d[6]}<br>
      TB Dalam Pengobatan: ${d[7]}<br>
      TB Terdeteksi: ${d[8]}

      <h3>Lansia</h3>
      Mandiri: ${d[9]} | B: ${d[10]} | C: ${d[11]}

      <h3>ODF</h3>
      ${d[12]}
    `;

    new Chart(grafik, {
      type: "bar",
      data: {
        labels: [
          "Ibu Hamil",
          "Balita",
          "TB",
          "Lansia",
          "ODF"
        ],
        datasets: [{
          data: [
            ibuHamilTotal,
            balitaTotal,
            d[8],
            (+d[9] + +d[10] + +d[11]),
            d[12]
          ]
        }]
      }
    });
  });
</script>

</body>
</html>
